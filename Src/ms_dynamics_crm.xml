<entityStoreData xmlns="http://www.vordel.com/2005/06/24/entityStore">
<metaInfo flags="138">
	<exportRoots>
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
				</key>
			</key>
		</key>
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
				</key>
			</key>
		</key>
		<key type='AuthProfilesGroup'>
			<id field='name' value='Auth Profiles'/>
			<key type='OAuthGroup'>
				<id field='name' value='OAuth2'/>
				<key type='OAuthProviderProfile'>
					<id field='name' value='Azure AD'/>
					<key type='OAuthAppProfile'>
						<id field='name' value='CRM App'/>
					</key>
				</key>
			</key>
		</key>
		<key type='NetService'>
			<id field='name' value='Service'/>
			<key type='HTTP'>
				<id field='name' value='Default Services'/>
				<key type='XMLFirewall'>
					<id field='uriprefix' value='/azure/oauth2/callback'/>
					<id field='httpMethod' value='*'/>
				</key>
			</key>
		</key>
		<key type='ESConfiguration'>
			<id field='name' value='Entity Store Configuration'/>
		</key>
	</exportRoots>
	<typeVersions>
		<type name="AuthProfilesGroup" version="0"/>
		<type name="CacheAttributeFilter" version="1"/>
		<type name="CheckSessionFilter" version="0"/>
		<type name="CircuitContainer" version="1"/>
		<type name="CircuitReference" version="2"/>
		<type name="ConnectToURLFilter" version="4"/>
		<type name="ConnectionFilter" version="17"/>
		<type name="CreateSessionFilter" version="0"/>
		<type name="DeleteOAuthTokenFilter" version="0"/>
		<type name="ESConfiguration" version="21"/>
		<type name="Entity" version="0"/>
		<type name="ExtractRESTAttributesFilter" version="2"/>
		<type name="Filter" version="5"/>
		<type name="FilterCircuit" version="4"/>
		<type name="GetOAuthClientTokenFilter" version="6"/>
		<type name="HTTP" version="5"/>
		<type name="IsCachedAttributeFilter" version="1"/>
		<type name="JavaProcess" version="0"/>
		<type name="JavaScriptFilter" version="3"/>
		<type name="LoadableModule" version="2"/>
		<type name="NamedAuthnProfile" version="0"/>
		<type name="NamedGroup" version="0"/>
		<type name="NamedTopLevelGroup" version="0"/>
		<type name="NativeModule" version="0"/>
		<type name="NetService" version="5"/>
		<type name="OAuthAppProfile" version="4"/>
		<type name="OAuthGroup" version="0"/>
		<type name="OAuthProviderProfile" version="6"/>
		<type name="PortableCircuitReference" version="0"/>
		<type name="Process" version="0"/>
		<type name="RedirectFilter" version="0"/>
		<type name="RootChild" version="0"/>
		<type name="SaveOAuthTokenFilter" version="0"/>
		<type name="SaveToFileFilter" version="2"/>
		<type name="ScopeList" version="0"/>
		<type name="SetAttributeFilter" version="0"/>
		<type name="SocketProtocol" version="1"/>
		<type name="SoftCircuitReference" version="0"/>
		<type name="URIHandler" version="5"/>
		<type name="VerifyIDTokenFilter" version="0"/>
		<type name="XMLFirewall" version="9"/>
	</typeVersions>
	<realizedTypes><![CDATA[
<entityStoreData>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="RootChild"/>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="RootChild" name="LoadableModule">
        <constant name="_version" type="integer" value="2"/>
        <constant name="loadorder" type="integer" value="1000000"/>
        <field cardinality="?" name="classloader" type="^ClassLoader"/>

        </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="LoadableModule" name="NativeModule">
        <constant name="_version" type="integer" value="0"/>
                <constant name="class" type="string" value="com.vordel.dwe.NativeModule"/>
        </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="NativeModule" name="SocketProtocol">
        <constant name="_version" type="integer" value="1"/>
        <componentType name="Interface"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="SocketProtocol" name="HTTP">
        <constant name="_version" type="integer" value="5"/>
        <constant name="class" type="string" value="com.vordel.dwe.http.HTTP"/>
        <componentType name="URIHandler"/>
        <componentType name="VirtualHost"/>
        <field cardinality="1" default="" isKey="true" name="name" type="string"/> <!--  ES needs name -->
        <field cardinality="?" default="-1" name="corsProfile" type="^CORS"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="ESConfiguration">
        <constant name="_version" type="integer" value="21"/>
        <!--
            Give this singleton a key.
        -->
        <field isKey="true" name="name" type="string"/>
        <!-- 
            We use this field to verify that the passphrase for the 
            encryped data is synchronized between the server and client, and
            between multiple invocations of the client
        -->
        <field name="passphraseTest" type="encrypted"/>
        <field name="version" type="string"/>
        <!-- The product key should never change for the lifetime of the product -->
        <field name="productKey" type="string"/>
        <field cardinality="?" name="gitrev" type="string"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="RootChild" name="Process">
        <constant name="_version" type="integer" value="0"/> <!-- Common features to all processes created by Vordel software. -->
		<field isKey="true" name="name" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Process" name="JavaProcess">
        <constant name="_version" type="integer" value="0"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="JavaProcess" name="NetService">
    <constant name="_version" type="integer" value="5"/>
    <!-- Static type-field. -->
    <constant name="executableImage" type="string" value="vshell"/>
    <componentType name="LoadableModule"/>
    <componentType name="ClassLoader"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="CircuitContainer">
    <constant name="_version" type="integer" value="1"/>
    <componentType cardinality="*" name="FilterCircuit"/>
    <componentType cardinality="*" name="CircuitContainer"/>
    <componentType cardinality="*" name="MVProperty"/>
    <field isKey="true" name="name" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="FilterCircuit">
        <constant name="_version" type="integer" value="4"/>
		<componentType cardinality="*" name="Filter"/>
		<componentType cardinality="1" name="BoundCircuit"/>
		<componentType cardinality="*" name="Property"/>
		<field cardinality="1" name="start" type="@Filter"/>
		<field cardinality="?" name="fault" type="@Filter"/>
		<field isKey="true" name="name" type="string"/>
		<field cardinality="1" default="3" name="logMask" type="integer"/>

		<field cardinality="?" name="description" type="string"/>		
		<field cardinality="1" name="category" type="@PolicyCategory">
            <defaultRef>
                <key type="PolicyCategoryGroup">
                  <id field="name" value="Policy Categories"/>
                  <key type="PolicyCategory">
                      <id field="name" value="miscellaneous"/>
                  </key>
                </key>
            </defaultRef>
        </field>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="RootChild" name="NamedTopLevelGroup">
        <constant name="_version" type="integer" value="0"/>
		<field isKey="true" name="name" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="NamedTopLevelGroup" name="AuthProfilesGroup"> 
        <constant name="_version" type="integer" value="0"/>
	<componentType cardinality="*" name="OAuthGroup"/>
	<componentType cardinality="*" name="SAMLGroup"/>
	<componentType cardinality="*" name="ApiKeyGroup"/>
	<componentType cardinality="*" name="BasicAuthGroup"/>
	<componentType cardinality="*" name="KerberosGroup"/> 
	<componentType cardinality="*" name="ApiKeySignerGroup"/> 
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Entity" name="ScopeList">
        <constant name="_version" type="integer" value="0"/>
	    <field isKey="true" name="name" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="NamedGroup">
        <constant name="_version" type="integer" value="0"/>
		<field isKey="true" name="name" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="NamedGroup" name="OAuthGroup">
    <constant name="_version" type="integer" value="0"/>
    <componentType cardinality="*" name="OAuthProviderProfile"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Entity" name="OAuthProviderProfile">
    <constant name="_version" type="integer" value="6"/>
    <componentType cardinality="*" name="OAuthAppProfile"/>
    <field cardinality="1" isKey="true" name="name" type="string"/>
    <field cardinality="1" default="com.vordel.oauth.client.providers.BaseOAuth2Provider" name="class" type="string"/>
    <field cardinality="1" name="authzUrl" type="string"/>
    <field cardinality="1" name="tokenUrl" type="string"/>
    <field cardinality="1" name="tokenStore" type="^ClientAccessTokenPersist"/>
    <field cardinality="1" name="cacheToUse" type="^Cache">
      <defaultRef>
        <key type="CacheManager">
          <id field="name" value="Cache Manager"/>
          <key type="Cache">
            <id field="name" value="OAuth Client State Cache"/>
          </key>
        </key>
      </defaultRef>
    </field>

  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="URIHandler">
        <constant name="_version" type="integer" value="5"/>
        <constant name="class" type="string" value="com.vordel.dwe.http.URIHandler"/>
		<field cardinality="1" default="" isKey="true" name="uriprefix" type="string"/>
        <field cardinality="1" default="*" isKey="true" name="httpMethod" type="string"/>
    	<field cardinality="1" default="LONGEST" name="pathMatching" type="string"/> <!-- EXACT, LONGEST -->
        <field cardinality="?" default="-1" name="corsProfile" type="^CORS"/>
    	<field cardinality="1" default="HTTP" name="corsUsage" type="string"/> <!-- HTTP, URIHANDLER -->
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="URIHandler" name="XMLFirewall">
    <constant name="_version" type="integer" value="9"/>
    <constant name="class" type="string" value="com.vordel.dwe.http.HTTPPlugin"/>
    <constant name="loadorder" type="integer" value="2000000"/>
    <componentType cardinality="*" name="CircuitReference"/>
    <componentType cardinality="*" name="URIHandler"/>
    <field default="1" name="evaluate" type="boolean"/>
    <field cardinality="1" name="filterCircuit" type="^FilterCircuit"/>
    <field cardinality="1" default="2" name="logMask" type="integer"/>
    <field cardinality="1" default="0" name="payloadMask" type="integer"/>
    <field cardinality="1" default="1" name="enabled" type="boolean"/>
    <field cardinality="1" default="0" name="enableAccessLogging" type="boolean"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Entity" name="CircuitReference">
    <constant name="_version" type="integer" value="2"/>
    <componentType cardinality="*" name="Property"/>
    <field isKey="true" name="name" type="string"/>
    <field cardinality="1" name="priority" type="integer"/>
    <field cardinality="?" name="circuitPK" type="^FilterCircuit"/>
    <!-- The evaluation of the referenced circuit is conditional. By default evaluation is enabled. -->
    <field cardinality="1" default="true" name="evaluate" type="boolean"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="CircuitReference" name="SoftCircuitReference">
    <constant name="_version" type="integer" value="0"/>
    <!-- 
      Override the circuitPK reference, making it a string value which can be interpreted as a reference 
      at run time.
    -->
    <field cardinality="?" name="circuitPK" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="CircuitReference" name="PortableCircuitReference">
    <constant name="_version" type="integer" value="0"/>
    <field cardinality="?" name="circuitPK" type="^FilterCircuit"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="NamedAuthnProfile">
    <constant name="_version" type="integer" value="0"/>
    <field cardinality="1" isKey="true" name="name" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="NamedAuthnProfile" name="OAuthAppProfile">
    <constant name="_version" type="integer" value="4"/>
    <componentType cardinality="?" name="ScopeList"/> 
    <componentType cardinality="?" name="Property"/> 
    <componentType cardinality="?" name="AdditionalClaims"/> 
    <field cardinality="1" name="clientid" type="string"/>
    <field cardinality="?" name="clientsecret" type="encrypted"/>
    <field cardinality="1" default="authorization_code" name="oauthFlowType" type="string"/>
    <field cardinality="1" default="AuthorizationHeader" name="locationOfClientDetails" type="string"/>
    <field cardinality="1" default="client_id" name="clientIdHeaderName" type="string"/>
    <field cardinality="1" default="client_secret" name="clientSecretHeaderName" type="string"/>
    <field cardinality="?" name="jwtSigner" type="^Certificate"/>
    <field cardinality="?" default="RS256" name="signatureAlg" type="string"/>
    <field cardinality="?" default="60" name="jwtExpiresIn" type="long"/>
    <field cardinality="?" name="redirectURL" type="string"/>
    <field cardinality="?" default="${oauth.resource.owner.id}" name="resourceOwnerId" type="string"/>
    <field cardinality="1" default="wildcard" name="resourceOwnerPasswordType" type="string"/>
    <field cardinality="?" default="${oauth.resource.owner.password}" name="resourceOwnerPassword" type="string"/>
    <field cardinality="?" name="resourceOwnerPasswordPrivate" type="encrypted"/>
    <!-- Options for assertionType are CreateAssertion/UseAssertion -->
    <field cardinality="?" default="CreateAssertion" name="assertionType" type="string"/>
    <field cardinality="?" default="${oauth.saml.assertion}" name="externalAssertion" type="string"/>     
    <field cardinality="?" name="samlSigner" type="^Certificate"/>
    <field cardinality="?" default="${authentication.subject.id}" name="samlResourceOwnerId" type="string"/>
    <field cardinality="1" default="60" name="lifeTime" type="long"/>
    <field cardinality="1" default="0" name="driftTime" type="long"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="Filter">
        <constant name="_version" type="integer" value="5"/>
        <field cardinality="?" name="successNode" type="@Filter"/>
        <field cardinality="?" name="failureNode" type="@Filter"/>
        <field isKey="true" name="name" type="string"/>
        <field cardinality="1" default="2" name="logMask" type="integer"/>
        <field cardinality="1" default="Filter aborted due to exception" name="logFatal" type="string"/>
        <field cardinality="1" default="Filter failed" name="logFailure" type="string"/>
        <field cardinality="1" default="Filter passed" name="logSuccess" type="string"/>
        <field cardinality="1" name="category" type="@Category">
            <defaultRef>
                <key type="CategoryGroup">
                  <id field="name" value="Filter Categories"/>
                  <key type="Category">
                      <id field="name" value="miscellaneous"/>
                  </key>
                </key>
            </defaultRef>
        </field>
      <field cardinality="1" default="0" name="abortProcessingOnLogError" type="boolean"/>
      <field cardinality="1" default="SERVICE" name="logMaskType" type="string"/>
      <field cardinality="*" name="classloader" type="^ClassLoader"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CheckSessionFilter">
        <constant name="_version" type="integer" value="0"/>
	<constant name="class" type="string" value="com.vordel.circuit.authn.CheckSessionFilter"/>			
	<field cardinality="1" name="category" type="@Category">
          <defaultRef>
            <key type="CategoryGroup">
              <id field="name" value="Filter Categories"/>
              <key type="Category">
                <id field="name" value="authentication"/>
              </key>
            </key>
          </defaultRef>
        </field>
        <field cardinality="1" default="VIDUSR" name="cookie" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SetAttributeFilter">
        <constant name="_version" type="integer" value="0"/>
  
    <!-- Name of the Filter class that encapsulates this configuration entity -->
    <constant name="class" type="string" value="com.vordel.circuit.attribute.SetAttributeFilter"/>
    
    <!-- List of the configuration parameters, their types, and their default values -->
    <field cardinality="1" default="" name="messageAttribute" type="string"/>	
    <field cardinality="1" default="" name="attributeValue" type="string"/>	
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SaveToFileFilter">
		<constant name="_version" type="integer" value="2"/>
		<constant name="class" type="string" value="com.vordel.circuit.file.SaveToFileFilter"/>
		<field cardinality="1" default="${id}.out" name="fileName" type="string"/>
		<field cardinality="1" default="${environment.VINSTDIR}/message-archive" name="directory" type="string"/>
		<field cardinality="1" default="1000" name="maxFileSize" type="integer"/>
		<field cardinality="1" default="500" name="maxNumberFiles" type="integer"/>
		<field cardinality="1" default="0" name="includeHeaders" type="boolean"/>
		<field cardinality="1" default="0" name="includeRequestLine" type="boolean"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Filter" name="GetOAuthClientTokenFilter">
    <constant name="_version" type="integer" value="6"/>
    <constant name="class" type="string" value="com.vordel.circuit.oauth.client.GetOAuthClientTokenFilter"/>
    <componentType cardinality="1" name="ConnectionFilter"/>
    <field cardinality="?" name="profile" type="^OAuthAppProfile"/>
    <field cardinality="?" default="${authentication.subject.id}" name="tokenKey" type="string"/>

  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Filter" name="DeleteOAuthTokenFilter">
    <constant name="_version" type="integer" value="0"/>
    <constant name="class" type="string" value="com.vordel.circuit.oauth.client.DeleteOAuthTokenFilter"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="ExtractRESTAttributesFilter">
    <constant name="_version" type="integer" value="2"/>
    <constant name="class" type="string" value="com.vordel.circuit.attribute.ExtractRESTAttributesFilter"/>
    <field cardinality="1" default="1" name="useHeaders" type="boolean"/>
    <field cardinality="1" default="1" name="useQueryString" type="boolean"/>
    <field cardinality="1" default="params.query" name="queryAttributePrefix" type="string"/>
    <field cardinality="1" default="0" name="decode" type="boolean"/>
    <field cardinality="1" name="category" type="@Category">
      <defaultRef>
        <key type="CategoryGroup">
          <id field="name" value="Filter Categories"/>
          <key type="Category">
            <id field="name" value="attribute"/>
          </key>
        </key>
      </defaultRef>
    </field>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CacheAttributeFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.CacheAttributeFilter"/>
        <field cardinality="1" name="cacheToUse" type="^Cache"/>
	    <field cardinality="1" default="message.key" name="keyAttributeName" type="string"/>
		<field cardinality="1" default="content.body" name="attributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="IsCachedAttributeFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.IsCachedAttributeFilter"/>
        <field cardinality="1" name="cacheToUse" type="^Cache"/>
	    <field cardinality="1" default="message.key" name="keyAttributeName" type="string"/>
		<field cardinality="1" default="content.body" name="attributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Filter" name="VerifyIDTokenFilter">
    <constant name="_version" type="integer" value="0"/>
    <constant name="class" type="string" value="com.vordel.circuit.openidconnect.VerifyIDTokenFilter"/>
    <field cardinality="?" default="KEYSET" name="verifyWith" type="string"/>
    <field cardinality="?" default="${oauth.client.application.getTokenURL().toString()}" name="issuer" type="string"/>
    <field cardinality="?" name="jwtVerifier" type="^Certificate"/>
    <field cardinality="?" default="60" name="clockSkew" type="long"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="JavaScriptFilter">
        <constant name="_version" type="integer" value="3"/>
	<constant name="class" type="string" value="com.vordel.circuit.script.ScriptFilter"/>
	<field cardinality="1" default="function invoke(msg)         {            return true;         }" name="script" type="string"/>
	<field cardinality="1" default="nashorn" name="engineName" type="string"/>
        <field cardinality="*" name="requiredProperties" type="string"/>
        <field cardinality="*" name="generatedProperties" type="string"/>
        <field cardinality="*" name="consumedProperties" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="false" extends="Filter" name="SaveOAuthTokenFilter">
    <constant name="_version" type="integer" value="0"/>
    <constant name="class" type="string" value="com.vordel.circuit.oauth.client.SaveOAuthTokenFilter"/>
     <field cardinality="1" default="${authentication.subject.id}" name="tokenKey" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="ConnectionFilter">
    <constant name="_version" type="integer" value="17"/>
    <constant name="class" type="string" value="com.vordel.circuit.net.ConnectionFilter"/>
    <componentType cardinality="1" name="SaveToFileFilter"/>
    <field cardinality="?" name="profile" type="^NamedAuthnProfile"/>

    <!-- SSL Specific -->
    <field cardinality="*" name="caCerts" type="^Certificate"/>
    <field cardinality="*" name="sslUsers" type="^Certificate"/>
    <field cardinality="1" default="true" name="useRootCerts" type="boolean"/>
    <field default="FIPS:!SSLv3:!aNULL" name="ciphers" type="string"/> <!-- See OpenSSL "ciphers" manpage -->
    <!-- set of tokens for advanced SSL options: nosslv2, nosslv3, etc. -->
    <field cardinality="*" name="ssloptions" type="string">
        <defaultValue>nosslv2</defaultValue>
        <defaultValue>nosslv3</defaultValue>
        <defaultValue>notlsv1</defaultValue>
        <defaultValue>notlsv1_1</defaultValue>
    </field>

    <field cardinality="?" default="0" name="sendProxyMode" type="boolean"/>	
    <field cardinality="?" default="0" name="forwardClientHostHeader" type="boolean"/>


    <field cardinality="1" default="false" name="transparentProxy" type="boolean"/>
    <field cardinality="1" default="false" name="sendReceivedContentHeaders" type="boolean"/>
    <field cardinality="1" default="true" name="handleRedirects" type="boolean"/>
    <field cardinality="1" default="false" name="performRetries" type="boolean"/>
    <field cardinality="*" name="retryHTTPRanges" type="^HTTPStatusClass"/>
    <field cardinality="1" default="5" name="retryCount" type="string"/>
    <field cardinality="1" default="500" name="retryLatency" type="string"/>
    <field cardinality="1" default="false" name="slaBreachAsFailure" type="boolean"/>
    <field cardinality="1" default="false" name="saveTransactionOnFailure" type="boolean"/>
    <field cardinality="1" default="false" name="runPolicyOnConnectionFailure" type="boolean"/>
    <field cardinality="?" name="connectionFailurePolicy" type="^FilterCircuit"/>
    <field cardinality="?" name="proxyServer" type="^ProxyServer"/>
    <field cardinality="?" default="0" name="stickyness" type="integer"/>
    <field cardinality="?" default="unnamed" name="stickyCookieName" type="string"/>
    <field cardinality="?" default="600000" name="stickyCookieExpiry" type="long"/>
    <field cardinality="?" default="" name="stickyCookiePath" type="string"/>
    <field cardinality="?" default="" name="stickyCookieDomain" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="ConnectionFilter" name="ConnectToURLFilter">
        <constant name="_version" type="integer" value="4"/>
		<constant name="class" type="string" value="com.vordel.circuit.net.ConnectToURLFilter"/>
		<field cardinality="1" default="${http.request.uri}" name="url" type="string"/>	
		<field cardinality="1" default="${http.request.verb}" name="method" type="string"/>	
		<field cardinality="1" default="${content.body}" name="body" type="string"/>	
		<field cardinality="1" default="${http.headers}" name="protoHeaders" type="string"/>	
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="RedirectFilter">
        <constant name="_version" type="integer" value="0"/>
		    <constant name="class" type="string" value="com.vordel.circuit.net.RedirectFilter"/>
          <field cardinality="1" default="301" name="httpResponseStatus" type="integer"/>
          <field cardinality="1" name="url" type="string"/>
          <field cardinality="?" name="outputContentType" type="string"/>
          <field cardinality="?" name="content" type="string"/>	
         </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CreateSessionFilter">
        <constant name="_version" type="integer" value="0"/>
	<constant name="class" type="string" value="com.vordel.circuit.authn.CreateSessionFilter"/>			
	<field cardinality="1" name="category" type="@Category">
          <defaultRef>
            <key type="CategoryGroup">
              <id field="name" value="Filter Categories"/>
              <key type="Category">
                <id field="name" value="authentication"/>
              </key>
            </key>
          </defaultRef>
        </field>
    <field cardinality="1" default="43200000" name="sessionExpiry" type="long"/>
    <field cardinality="1" default="false" name="onlySendOverSSL" type="boolean"/>
    <field cardinality="1" default="false" name="httpOnly" type="boolean"/>
    <field cardinality="1" default="/" name="uriprefix" type="string"/>
    <field cardinality="?" name="domain" type="string"/>
    <field cardinality="1" default="VIDUSR" name="cookie" type="string"/>
  </entityType>
</entityStoreData>
	]]></realizedTypes>
</metaInfo>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FilterCircuit">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
		</key>
	</key>
	<fval name="category"><value contentType="reference">
		<key type='PolicyCategoryGroup'>
			<id field='name' value='Policy Categories'/>
			<key type='PolicyCategory'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="description"><value></value></fval>
	<fval name="logMask"><value>3</value></fval>
	<fval name="name"><value>MS Dynamics CRM API-Mgr Routing</value></fval>
	<fval name="start"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
					<key type='CheckSessionFilter'>
						<id field='name' value='Check Client-Session'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CheckSessionFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='authentication'/>
			</key>
		</key>
	</value></fval>
	<fval name="cookie"><value>CRMCLIENTCOOKIE</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
					<key type='GetOAuthClientTokenFilter'>
						<id field='name' value='Get OAuth Access Token'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Check Client-Session</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
					<key type='ConnectToURLFilter'>
						<id field='name' value='Connect to URL'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="GetOAuthClientTokenFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Get OAuth Access Token</value></fval>
	<fval name="profile"><value contentType="reference">
<key type='AuthProfilesGroup'><id field='name' value='Auth Profiles'/><key type='OAuthGroup'><id field='name' value='OAuth2'/><key type='OAuthProviderProfile'><id field='name' value='Azure AD'/><key type='OAuthAppProfile'><id field='name' value='CRM App'/></key></key></key></key>	</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
					<key type='JavaScriptFilter'>
						<id field='name' value='Create State-ID-Cache-Key'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="tokenKey"><value>${authentication.subject.id}</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ConnectionFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
				<key type='GetOAuthClientTokenFilter'>
					<id field='name' value='Get OAuth Access Token'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="caCerts"></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="ciphers"><value>FIPS:!SSLv3:!aNULL</value></fval>
	<fval name="connectionFailurePolicy"><value contentType="reference">-1</value></fval>
	<fval name="forwardClientHostHeader"><value>0</value></fval>
	<fval name="handleRedirects"><value>1</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Connection Details</value></fval>
	<fval name="performRetries"><value>0</value></fval>
	<fval name="proxyServer"><value contentType="reference">-1</value></fval>
	<fval name="retryCount"><value>5</value></fval>
	<fval name="retryHTTPRanges"><value contentType="reference">-1</value></fval>
	<fval name="retryLatency"><value>500</value></fval>
	<fval name="runPolicyOnConnectionFailure"><value>0</value></fval>
	<fval name="saveTransactionOnFailure"><value>0</value></fval>
	<fval name="sendProxyMode"><value>0</value></fval>
	<fval name="sendReceivedContentHeaders"><value>0</value></fval>
	<fval name="slaBreachAsFailure"><value>0</value></fval>
	<fval name="sslUsers"><value contentType="reference">-1</value></fval>
	<fval name="ssloptions">
		<value>nosslv3</value>
		<value>notlsv1</value>
		<value>nosslv2</value>
		<value>notlsv1_1</value>
	</fval>
	<fval name="stickyCookieDomain"><value></value></fval>
	<fval name="stickyCookieExpiry"><value>600000</value></fval>
	<fval name="stickyCookieName"><value>unnamed</value></fval>
	<fval name="stickyCookiePath"><value></value></fval>
	<fval name="stickyness"><value>0</value></fval>
	<fval name="transparentProxy"><value>0</value></fval>
	<fval name="useRootCerts"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveToFileFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
				<key type='GetOAuthClientTokenFilter'>
					<id field='name' value='Get OAuth Access Token'/>
					<key type='ConnectionFilter'>
						<id field='name' value='Connection Details'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="directory"><value>${environment.VINSTDIR}/message-archive</value></fval>
	<fval name="fileName"><value>${id}.out</value></fval>
	<fval name="includeHeaders"><value>0</value></fval>
	<fval name="includeRequestLine"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="maxFileSize"><value>1000</value></fval>
	<fval name="maxNumberFiles"><value>500</value></fval>
	<fval name="name"><value>Persistence Details</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ConnectToURLFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="body"><value>${content.body}</value></fval>
	<fval name="caCerts"></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="ciphers"><value>FIPS:!SSLv3:!aNULL</value></fval>
	<fval name="connectionFailurePolicy"><value contentType="reference">-1</value></fval>
	<fval name="forwardClientHostHeader"><value>0</value></fval>
	<fval name="handleRedirects"><value>1</value></fval>
	<fval name="logFailure"><value>Failed to route request to endpoint.</value></fval>
	<fval name="logFatal"><value>Error occurred while routing request to endpoint. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Successfully routed request to endpoint</value></fval>
	<fval name="method"><value>GET</value></fval>
	<fval name="name"><value>Connect to URL</value></fval>
	<fval name="performRetries"><value>0</value></fval>
	<fval name="profile"><value contentType="reference">
<key type='AuthProfilesGroup'><id field='name' value='Auth Profiles'/><key type='OAuthGroup'><id field='name' value='OAuth2'/><key type='OAuthProviderProfile'><id field='name' value='Azure AD'/><key type='OAuthAppProfile'><id field='name' value='CRM App'/></key></key></key></key>	</value></fval>
	<fval name="protoHeaders"><value>${http.headers}</value></fval>
	<fval name="proxyServer"><value contentType="reference">-1</value></fval>
	<fval name="retryCount"><value>5</value></fval>
	<fval name="retryHTTPRanges"><value contentType="reference">-1</value></fval>
	<fval name="retryLatency"><value>500</value></fval>
	<fval name="runPolicyOnConnectionFailure"><value>0</value></fval>
	<fval name="saveTransactionOnFailure"><value>0</value></fval>
	<fval name="sendProxyMode"><value>0</value></fval>
	<fval name="sendReceivedContentHeaders"><value>0</value></fval>
	<fval name="slaBreachAsFailure"><value>0</value></fval>
	<fval name="sslUsers"><value contentType="reference">-1</value></fval>
	<fval name="ssloptions">
		<value>nosslv3</value>
		<value>notlsv1</value>
		<value>nosslv2</value>
		<value>notlsv1_1</value>
	</fval>
	<fval name="stickyCookieDomain"><value></value></fval>
	<fval name="stickyCookieExpiry"><value>600000</value></fval>
	<fval name="stickyCookieName"><value>unnamed</value></fval>
	<fval name="stickyCookiePath"><value></value></fval>
	<fval name="stickyness"><value>0</value></fval>
	<fval name="transparentProxy"><value>0</value></fval>
	<fval name="url"><value>${destinationURL}</value></fval>
	<fval name="useRootCerts"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveToFileFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
				<key type='ConnectToURLFilter'>
					<id field='name' value='Connect to URL'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="directory"><value>${environment.VINSTDIR}/message-archive</value></fval>
	<fval name="fileName"><value>${id}.out</value></fval>
	<fval name="includeHeaders"><value>0</value></fval>
	<fval name="includeRequestLine"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="maxFileSize"><value>1000</value></fval>
	<fval name="maxNumberFiles"><value>500</value></fval>
	<fval name="name"><value>Persistence Details</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JavaScriptFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="consumedProperties"></fval>
	<fval name="engineName"><value>nashorn</value></fval>
	<fval name="generatedProperties"></fval>
	<fval name="logFailure"><value>Failed script filter</value></fval>
	<fval name="logFatal"><value>Error while attempt to run script filter. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Passed script filter</value></fval>
	<fval name="name"><value>Create State-ID-Cache-Key</value></fval>
	<fval name="requiredProperties"></fval>
	<fval name="script"><value>var imp = new JavaImporter(com.vordel.trace);&#xA;with(imp) {&#xA;function invoke(msg) &#xA;{ &#xA;&#x9;var httpHeaders = msg.get(&quot;http.headers&quot;);&#xA;&#x9;var location = httpHeaders.get(&quot;Location&quot;);&#xA;&#x9;var locationParts = location.split(&quot;\&amp;&quot;);&#xA;&#x9;var stateId = locationParts[3].split(&quot;=&quot;);&#xA;&#xA;&#x9;Trace.debug(&quot;State-ID is: &quot; + stateId[1]);&#xA;&#x9;msg.put(&quot;state.id.http.request.url&quot;, stateId[1] + &quot;.http.request.url&quot;);&#xA;&#x9;return true;&#xA;}&#xA;}</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
					<key type='CacheAttributeFilter'>
						<id field='name' value='Save Return-URL'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CacheAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Dynamics CRM API-Mgr Routing'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>http.request.url</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='OAuth Client State Cache'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>state.id.http.request.url</value></fval>
	<fval name="logFailure"><value>Failed to cache the message attribute.</value></fval>
	<fval name="logFatal"><value>Error while caching the message attribute. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Cached the message attribute.</value></fval>
	<fval name="name"><value>Save Return-URL</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CircuitContainer">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
	</key>
	<fval name="name"><value>MS Azure</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CircuitContainer">
	<fval name="name"><value>OAuth Client</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FilterCircuit">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
		</key>
	</key>
	<fval name="category"><value contentType="reference">
		<key type='PolicyCategoryGroup'>
			<id field='name' value='Policy Categories'/>
			<key type='PolicyCategory'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="description"><value></value></fval>
	<fval name="logMask"><value>3</value></fval>
	<fval name="name"><value>MS Azure Authorize Callback</value></fval>
	<fval name="start"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='ExtractRESTAttributesFilter'>
						<id field='name' value='Extract State-Parameter'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${openid.idtoken.sub}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>authentication.subject.id</value></fval>
	<fval name="name"><value>Set authenticated subject id</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='CreateSessionFilter'>
						<id field='name' value='Create Client-Session'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveOAuthTokenFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Save the OAuth Token</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='SetAttributeFilter'>
						<id field='name' value='Create URL-State-Key'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="tokenKey"><value>${authentication.subject.id}</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="GetOAuthClientTokenFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">-1</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Exchange Authorization Code for Token and ID Token</value></fval>
	<fval name="profile"><value contentType="reference">
<key type='AuthProfilesGroup'><id field='name' value='Auth Profiles'/><key type='OAuthGroup'><id field='name' value='OAuth2'/><key type='OAuthProviderProfile'><id field='name' value='Azure AD'/><key type='OAuthAppProfile'><id field='name' value='CRM App'/></key></key></key></key>	</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='ConnectToURLFilter'>
						<id field='name' value='Get Azure JSON Key Set for Verification'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="tokenKey"><value></value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ConnectionFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
				<key type='GetOAuthClientTokenFilter'>
					<id field='name' value='Exchange Authorization Code for Token and ID Token'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="caCerts"></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="ciphers"><value>DEFAULT</value></fval>
	<fval name="connectionFailurePolicy"><value contentType="reference">-1</value></fval>
	<fval name="forwardClientHostHeader"><value>0</value></fval>
	<fval name="handleRedirects"><value>1</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Connection Details</value></fval>
	<fval name="performRetries"><value>0</value></fval>
	<fval name="proxyServer"><value contentType="reference">-1</value></fval>
	<fval name="retryCount"><value>5</value></fval>
	<fval name="retryHTTPRanges"><value contentType="reference">-1</value></fval>
	<fval name="retryLatency"><value>500</value></fval>
	<fval name="runPolicyOnConnectionFailure"><value>0</value></fval>
	<fval name="saveTransactionOnFailure"><value>0</value></fval>
	<fval name="sendProxyMode"><value>0</value></fval>
	<fval name="sendReceivedContentHeaders"><value>0</value></fval>
	<fval name="slaBreachAsFailure"><value>0</value></fval>
	<fval name="sslUsers"><value contentType="reference">-1</value></fval>
	<fval name="ssloptions">
		<value>nosslv3</value>
		<value>notlsv1</value>
		<value>nosslv2</value>
		<value>notlsv1_1</value>
	</fval>
	<fval name="stickyCookieDomain"><value></value></fval>
	<fval name="stickyCookieExpiry"><value>600000</value></fval>
	<fval name="stickyCookieName"><value>unnamed</value></fval>
	<fval name="stickyCookiePath"><value></value></fval>
	<fval name="stickyness"><value>0</value></fval>
	<fval name="transparentProxy"><value>0</value></fval>
	<fval name="useRootCerts"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveToFileFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
				<key type='GetOAuthClientTokenFilter'>
					<id field='name' value='Exchange Authorization Code for Token and ID Token'/>
					<key type='ConnectionFilter'>
						<id field='name' value='Connection Details'/>
					</key>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="directory"><value>${environment.VINSTDIR}/message-archive</value></fval>
	<fval name="fileName"><value>${id}.out</value></fval>
	<fval name="includeHeaders"><value>0</value></fval>
	<fval name="includeRequestLine"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="maxFileSize"><value>1000</value></fval>
	<fval name="maxNumberFiles"><value>500</value></fval>
	<fval name="name"><value>Persistence Details</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="DeleteOAuthTokenFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Delete an OAuth Access Token</value></fval>
	<fval name="successNode"><value contentType="reference">-1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="VerifyIDTokenFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="clockSkew"><value>120</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='DeleteOAuthTokenFilter'>
						<id field='name' value='Delete an OAuth Access Token'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="issuer"><value>https://sts.windows.net/YOUR_AAD_TENANT_ID/</value></fval>
	<fval name="jwtVerifier"><value contentType="reference">-1</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Verify ID Token</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='SetAttributeFilter'>
						<id field='name' value='Set authenticated subject id'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="verifyWith"><value>KEYSET</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ConnectToURLFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="body"><value>${content.body}</value></fval>
	<fval name="caCerts"></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="ciphers"><value>DEFAULT</value></fval>
	<fval name="connectionFailurePolicy"><value contentType="reference">-1</value></fval>
	<fval name="forwardClientHostHeader"><value>0</value></fval>
	<fval name="handleRedirects"><value>1</value></fval>
	<fval name="logFailure"><value>Failed to route request to endpoint.</value></fval>
	<fval name="logFatal"><value>Error occurred while routing request to endpoint. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Successfully routed request to endpoint</value></fval>
	<fval name="method"><value>GET</value></fval>
	<fval name="name"><value>Get Azure JSON Key Set for Verification</value></fval>
	<fval name="performRetries"><value>0</value></fval>
	<fval name="profile"><value contentType="reference">-1</value></fval>
	<fval name="protoHeaders"><value>${http.headers}</value></fval>
	<fval name="proxyServer"><value contentType="reference">-1</value></fval>
	<fval name="retryCount"><value>5</value></fval>
	<fval name="retryHTTPRanges"><value contentType="reference">-1</value></fval>
	<fval name="retryLatency"><value>500</value></fval>
	<fval name="runPolicyOnConnectionFailure"><value>0</value></fval>
	<fval name="saveTransactionOnFailure"><value>0</value></fval>
	<fval name="sendProxyMode"><value>0</value></fval>
	<fval name="sendReceivedContentHeaders"><value>0</value></fval>
	<fval name="slaBreachAsFailure"><value>0</value></fval>
	<fval name="sslUsers"><value contentType="reference">-1</value></fval>
	<fval name="ssloptions">
		<value>nosslv3</value>
		<value>notlsv1</value>
		<value>nosslv2</value>
		<value>notlsv1_1</value>
	</fval>
	<fval name="stickyCookieDomain"><value></value></fval>
	<fval name="stickyCookieExpiry"><value>600000</value></fval>
	<fval name="stickyCookieName"><value>unnamed</value></fval>
	<fval name="stickyCookiePath"><value></value></fval>
	<fval name="stickyness"><value>0</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='VerifyIDTokenFilter'>
						<id field='name' value='Verify ID Token'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="transparentProxy"><value>0</value></fval>
	<fval name="url"><value>https://login.microsoftonline.com/common/discovery/keys</value></fval>
	<fval name="useRootCerts"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SaveToFileFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
				<key type='ConnectToURLFilter'>
					<id field='name' value='Get Azure JSON Key Set for Verification'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="directory"><value>${environment.VINSTDIR}/message-archive</value></fval>
	<fval name="fileName"><value>${id}.out</value></fval>
	<fval name="includeHeaders"><value>0</value></fval>
	<fval name="includeRequestLine"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="maxFileSize"><value>1000</value></fval>
	<fval name="maxNumberFiles"><value>500</value></fval>
	<fval name="name"><value>Persistence Details</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CreateSessionFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='authentication'/>
			</key>
		</key>
	</value></fval>
	<fval name="cookie"><value>CRMCLIENTCOOKIE</value></fval>
	<fval name="domain"><value></value></fval>
	<fval name="httpOnly"><value>1</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Create Client-Session</value></fval>
	<fval name="onlySendOverSSL"><value>0</value></fval>
	<fval name="sessionExpiry"><value>43200000</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='SaveOAuthTokenFilter'>
						<id field='name' value='Save the OAuth Token'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="uriprefix"><value>/</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ExtractRESTAttributesFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='attribute'/>
			</key>
		</key>
	</value></fval>
	<fval name="decode"><value>0</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Extract State-Parameter</value></fval>
	<fval name="queryAttributePrefix"><value>params.query</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='GetOAuthClientTokenFilter'>
						<id field='name' value='Exchange Authorization Code for Token and ID Token'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="useHeaders"><value>1</value></fval>
	<fval name="useQueryString"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${params.query.state}.http.request.url</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>state.id.http.request.url</value></fval>
	<fval name="name"><value>Create URL-State-Key</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='IsCachedAttributeFilter'>
						<id field='name' value='Is Redirect-URL cached?'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="IsCachedAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>http.redirect.url</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='OAuth Client State Cache'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>state.id.http.request.url</value></fval>
	<fval name="logFailure"><value>Failure while looking for key in the message attribute cache.</value></fval>
	<fval name="logFatal"><value>Error while looking for key in the  message attribiute cache. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Found the key in the message attribute cache.</value></fval>
	<fval name="name"><value>Is Redirect-URL cached?</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='OAuth Client'/>
			<key type='CircuitContainer'>
				<id field='name' value='MS Azure'/>
				<key type='FilterCircuit'>
					<id field='name' value='MS Azure Authorize Callback'/>
					<key type='RedirectFilter'>
						<id field='name' value='Redirect to requested page'/>
					</key>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="RedirectFilter">
	<key type='CircuitContainer'>
		<id field='name' value='OAuth Client'/>
		<key type='CircuitContainer'>
			<id field='name' value='MS Azure'/>
			<key type='FilterCircuit'>
				<id field='name' value='MS Azure Authorize Callback'/>
			</key>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="content"><value>Redirecting you to requested page: ${http.redirect.url}</value></fval>
	<fval name="httpResponseStatus"><value>301</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Filter passed</value></fval>
	<fval name="name"><value>Redirect to requested page</value></fval>
	<fval name="outputContentType"><value>text/html; charset=&quot;utf-8&quot;</value></fval>
	<fval name="url"><value>${http.redirect.url}</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="OAuthAppProfile">
	<key type='AuthProfilesGroup'>
		<id field='name' value='Auth Profiles'/>
		<key type='OAuthGroup'>
			<id field='name' value='OAuth2'/>
			<key type='OAuthProviderProfile'>
				<id field='name' value='Azure AD'/>
			</key>
		</key>
	</key>
	<fval name="assertionType"><value>CreateAssertion</value></fval>
	<fval name="clientIdHeaderName"><value>client_id</value></fval>
	<fval name="clientSecretHeaderName"><value>client_secret</value></fval>
	<fval name="clientid"><value>&lt;YOUR-CLIENT-ID&gt;</value></fval>
	<fval name="clientsecret"><value>U0VDUkVU</value></fval>
	<fval name="driftTime"><value>1</value></fval>
	<fval name="externalAssertion"><value>${oauth.saml.assertion}</value></fval>
	<fval name="jwtExpiresIn"><value>60</value></fval>
	<fval name="jwtSigner"><value contentType="reference">-1</value></fval>
	<fval name="lifeTime"><value>60</value></fval>
	<fval name="locationOfClientDetails"><value>QueryString</value></fval>
	<fval name="name"><value>CRM App</value></fval>
	<fval name="oauthFlowType"><value>authorization_code</value></fval>
	<fval name="redirectURL"><value>http://api-host.com:8080/azure/oauth2/callback</value></fval>
	<fval name="resourceOwnerId"><value>${oauth.resource.owner.id}</value></fval>
	<fval name="resourceOwnerPassword"><value>${oauth.resource.owner.password}</value></fval>
	<fval name="resourceOwnerPasswordPrivate"><value></value></fval>
	<fval name="resourceOwnerPasswordType"><value>wildcard</value></fval>
	<fval name="samlResourceOwnerId"><value>${authentication.subject.id}</value></fval>
	<fval name="samlSigner"><value contentType="reference">-1</value></fval>
	<fval name="signatureAlg"><value>RS256</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ScopeList">
	<key type='AuthProfilesGroup'>
		<id field='name' value='Auth Profiles'/>
		<key type='OAuthGroup'>
			<id field='name' value='OAuth2'/>
			<key type='OAuthProviderProfile'>
				<id field='name' value='Azure AD'/>
				<key type='OAuthAppProfile'>
					<id field='name' value='CRM App'/>
				</key>
			</key>
		</key>
	</key>
	<fval name="name"><value>openid</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="OAuthProviderProfile">
	<key type='AuthProfilesGroup'>
		<id field='name' value='Auth Profiles'/>
		<key type='OAuthGroup'>
			<id field='name' value='OAuth2'/>
		</key>
	</key>
	<fval name="authzUrl"><value>https://login.microsoftonline.com/YOUR_AAD_TENANT_ID/oauth2/authorize?resource=https%3A%2F%2FYOUR_CRM_ID.crm4.dynamics.com</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='OAuth Client State Cache'/></key></key>	</value></fval>
	<fval name="class"><value>com.vordel.oauth.client.providers.BaseOAuth2Provider</value></fval>
	<fval name="name"><value>Azure AD</value></fval>
	<fval name="tokenStore"><value contentType="reference">
<key type='OAuth2StoresGroup'><id field='name' value='OAuth2 Stores'/><key type='ClientAccessTokenStoreGroup'><id field='name' value='Client Access Token Stores'/><key type='ClientAccessTokenPersist'><id field='name' value='OAuth Client Access Token Store'/></key></key></key>	</value></fval>
	<fval name="tokenUrl"><value>https://login.microsoftonline.com/YOUR_AAD_TENANT_ID/oauth2/token</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="OAuthGroup">
	<key type='AuthProfilesGroup'>
		<id field='name' value='Auth Profiles'/>
	</key>
	<fval name="name"><value>OAuth2</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="AuthProfilesGroup">
	<fval name="name"><value>Auth Profiles</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="XMLFirewall">
	<key type='NetService'>
		<id field='name' value='Service'/>
		<key type='HTTP'>
			<id field='name' value='Default Services'/>
		</key>
	</key>
	<fval name="corsProfile"><value contentType="reference">-1</value></fval>
	<fval name="corsUsage"><value>HTTP</value></fval>
	<fval name="enableAccessLogging"><value>0</value></fval>
	<fval name="enabled"><value>1</value></fval>
	<fval name="evaluate"><value>1</value></fval>
	<fval name="filterCircuit"><value contentType="reference">
<key type='CircuitContainer'><id field='name' value='OAuth Client'/><key type='CircuitContainer'><id field='name' value='MS Azure'/><key type='FilterCircuit'><id field='name' value='MS Azure Authorize Callback'/></key></key></key>	</value></fval>
	<fval name="httpMethod"><value>*</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="pathMatching"><value>LONGEST</value></fval>
	<fval name="payloadMask"><value>0</value></fval>
	<fval name="uriprefix"><value>/azure/oauth2/callback</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="PortableCircuitReference">
	<key type='NetService'>
		<id field='name' value='Service'/>
		<key type='HTTP'>
			<id field='name' value='Default Services'/>
			<key type='XMLFirewall'>
				<id field='uriprefix' value='/azure/oauth2/callback'/>
				<id field='httpMethod' value='*'/>
			</key>
		</key>
	</key>
	<fval name="circuitPK"><value contentType="reference">-1</value></fval>
	<fval name="evaluate"><value>true</value></fval>
	<fval name="name"><value>CUSTOM_POLICY_REQ</value></fval>
	<fval name="priority"><value>1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="PortableCircuitReference">
	<key type='NetService'>
		<id field='name' value='Service'/>
		<key type='HTTP'>
			<id field='name' value='Default Services'/>
			<key type='XMLFirewall'>
				<id field='uriprefix' value='/azure/oauth2/callback'/>
				<id field='httpMethod' value='*'/>
			</key>
		</key>
	</key>
	<fval name="circuitPK"><value contentType="reference">-1</value></fval>
	<fval name="evaluate"><value>true</value></fval>
	<fval name="name"><value>CUSTOM_POLICY_RSP</value></fval>
	<fval name="priority"><value>3</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SoftCircuitReference">
	<key type='NetService'>
		<id field='name' value='Service'/>
		<key type='HTTP'>
			<id field='name' value='Default Services'/>
			<key type='XMLFirewall'>
				<id field='uriprefix' value='/azure/oauth2/callback'/>
				<id field='httpMethod' value='*'/>
			</key>
		</key>
	</key>
	<fval name="circuitPK"><value>system.policy.request</value></fval>
	<fval name="evaluate"><value>1</value></fval>
	<fval name="name"><value>GLOBAL_POLICY_REQ</value></fval>
	<fval name="priority"><value>0</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SoftCircuitReference">
	<key type='NetService'>
		<id field='name' value='Service'/>
		<key type='HTTP'>
			<id field='name' value='Default Services'/>
			<key type='XMLFirewall'>
				<id field='uriprefix' value='/azure/oauth2/callback'/>
				<id field='httpMethod' value='*'/>
			</key>
		</key>
	</key>
	<fval name="circuitPK"><value>system.policy.response</value></fval>
	<fval name="evaluate"><value>1</value></fval>
	<fval name="name"><value>GLOBAL_POLICY_RSP</value></fval>
	<fval name="priority"><value>4</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="HTTP">
	<key type='NetService'>
		<id field='name' value='Service'/>
	</key>
	<fval name="name"><value>Default Services</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="NetService">
	<fval name="name"><value>Service</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ESConfiguration">
	<fval name="name"><value>Entity Store Configuration</value></fval>
	<fval name="passphraseTest"><value>aHR0cDsvL3d3dy52b3JkZWwuY29t</value></fval>
	<fval name="productKey"><value>VordelGateway</value></fval>
	<fval name="version"><value>7.5.3</value></fval>
</entity>
</entityStoreData>
